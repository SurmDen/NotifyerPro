@page "/secondfactor"
@model SecondFactor

<div class="container">
    <div class="row mt-3">
        <div class="col-3"></div>
        <div class="col-6" asp-validation-summary="All">
            <h4 class="text-center text-white" style="border-radius: 15px; background-color: #06313a">
                Confirm your emaim address
            </h4>
            <form asp-page="secondfactor" method="post">
                <div class="form-group">
                    <label>Your Email:</label>
                    <input asp-for="Code" class="form-control" />
                </div>
                <br />
                <div class="text-center">
                    <button class="btn text-white" style="background-color: #06313a" type="submit">Confirm</button>
                </div>
            </form>
        </div>
        <div class="col-3"></div>
    </div>
</div>

@functions{
    public class SecondFactor : PageModel
    {
        private IMemoryCache cache;

        public SecondFactor(IMemoryCache cache)
        {
            this.cache = cache;
        }

        [BindProperty]
        [Required]
        public int Code { get; set; }

        public IActionResult OnGet()
        {
            return Page();
        }

        public IActionResult OnPost()
        {
            //if (Code == (int)cache.Get("code"))
            //{
            //    cache.Remove("code");

            //    return Redirect("/notifyer/profile");
            //}

            //cache.Remove("token");

            //ModelState.AddModelError("CODE", "This code is not right!");
            return Redirect("/notifyer/profile");
            //return Page();
        }
    }
}
